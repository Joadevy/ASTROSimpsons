---
import Layout from "../../layouts/Layout.astro";
import type {Simpson} from '../../types/api'

type response = {
	docs: Simpson[]
}

export async function getStaticPaths(){
    const {docs:data}: response = await fetch(`https://apisimpsons.fly.dev/api/personajes`).then(res => res.json())
    return data.map(({Nombre}) => ({
        params:{
            Nombre
        }
    }))
}


const {Nombre} = Astro.params
const {result: data} = await fetch(`https://apisimpsons.fly.dev/api/personajes/find/${Nombre}`).then(res => res.json())

---

<Layout title={`ASTRO-${Nombre}`}>
    <div class="border border-yellow shadow-lg rounded-md p-2 bg-zinc-800">
	<h2 class="text-2xl font-bold text-brown">{data[0].Nombre}</h2>
	<div class="w-40 h-56">
		<img transition:name="simpson-image" src={data[0].Imagen} alt={data[0].Nombre} class="w-full h-full aspect-auto" />
	</div>
</div>
</Layout>